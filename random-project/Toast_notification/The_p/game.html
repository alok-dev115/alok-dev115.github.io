<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Catch Me If You Can üòà</title>

<style>
@import url('https://fonts.googleapis.com/css2?family=Poppins:wght@400;600&display=swap');

body {
    margin: 0;
    background: linear-gradient(135deg, #ffd6e0, #ffe9f3);
    font-family: 'Poppins', sans-serif;
    text-align: center;
}

h1 {
    color: #ff4f8b;
    margin-top: 20px;
}

canvas {
    background: white;
    border-radius: 20px;
    margin: 20px auto;
    display: block;
    box-shadow: 0 15px 35px rgba(0,0,0,0.2);
}

/* Result overlay */
.overlay {
    position: fixed;
    inset: 0;
    background: rgba(255, 255, 255, 0.95);
    display: none;
    justify-content: center;
    align-items: center;
    flex-direction: column;
    z-index: 10;
}

.overlay img {
    width: 120px;
    margin: 10px;
}

.overlay h2 {
    color: #ff4f8b;
}

.overlay button {
    background: #ff4f8b;
    color: white;
    border: none;
    padding: 12px 24px;
    border-radius: 25px;
    font-size: 16px;
    cursor: pointer;
    margin-top: 10px;
}

.overlay a {
    margin-top: 15px;
    text-decoration: none;
    color: #ff4f8b;
    font-weight: 600;
}

/* Heart particles */
.heart {
    position: fixed;
    font-size: 20px;
    pointer-events: none;
    animation: pop 1s ease-out forwards;
}

@keyframes pop {
    0% {
        transform: scale(0.5);
        opacity: 1;
    }
    100% {
        transform: translate(var(--x), var(--y)) scale(1.3);
        opacity: 0;
    }
}
</style>
</head>

<body>

<h1>Try to Hit Me üòú</h1>
<p>(Tap on me if you can)</p>

<canvas id="game" width="320" height="420"></canvas>

<!-- Result -->
<div class="overlay" id="result">
    <h2>Okay okay‚Ä¶ you win üò≠‚ù§Ô∏è</h2>
    <button onclick="location.reload()">Play Again üéÆ</button>
    <!-- <a href="index.html">Back to Us üíï</a> -->
</div>

<script>
const canvas = document.getElementById("game");
const ctx = canvas.getContext("2d");

/* Enemy */
let enemy = {
    x: 120,
    y: 160,
    size: 60,
    speed: 3
};

let gameOver = false;

/* Optional image (safe fallback) */
const enemyImg = new Image();
enemyImg.src = "assets/images/memories/boy.jpg";
let imgLoaded = false;

enemyImg.onload = () => imgLoaded = true;
enemyImg.onerror = () => imgLoaded = false;

/* Move enemy */
function moveEnemy() {
    enemy.x += (Math.random() - 0.5) * enemy.speed * 10;
    enemy.y += (Math.random() - 0.5) * enemy.speed * 10;

    enemy.x = Math.max(0, Math.min(canvas.width - enemy.size, enemy.x));
    enemy.y = Math.max(0, Math.min(canvas.height - enemy.size, enemy.y));
}

/* Draw enemy */
function drawEnemy() {
    if (imgLoaded) {
        ctx.drawImage(enemyImg, enemy.x, enemy.y, enemy.size, enemy.size);
    } else {
        // Cute fallback circle ‚ù§Ô∏è
        ctx.fillStyle = "#ff4f8b";
        ctx.beginPath();
        ctx.arc(
            enemy.x + enemy.size / 2,
            enemy.y + enemy.size / 2,
            enemy.size / 2,
            0,
            Math.PI * 2
        );
        ctx.fill();
    }
}

/* Game loop */
function loop() {
    if (gameOver) return;
    ctx.clearRect(0, 0, canvas.width, canvas.height);
    moveEnemy();
    drawEnemy();
    requestAnimationFrame(loop);
}
loop();

/* Click detection */
canvas.addEventListener("click", (e) => {
    const rect = canvas.getBoundingClientRect();
    const x = e.clientX - rect.left;
    const y = e.clientY - rect.top;

    if (
        x > enemy.x &&
        x < enemy.x + enemy.size &&
        y > enemy.y &&
        y < enemy.y + enemy.size
    ) {
        heartExplosion(e.clientX, e.clientY);
        endGame();
    }
});

/* ‚ù§Ô∏è Heart explosion */
function heartExplosion(x, y) {
    for (let i = 0; i < 20; i++) {
        const heart = document.createElement("div");
        heart.className = "heart";
        heart.innerHTML = "‚ù§Ô∏è";

        heart.style.left = x + "px";
        heart.style.top = y + "px";
        heart.style.setProperty("--x", (Math.random() - 0.5) * 200 + "px");
        heart.style.setProperty("--y", (Math.random() - 0.5) * 200 + "px");

        document.body.appendChild(heart);
        setTimeout(() => heart.remove(), 1000);
    }
}

/* End game */
function endGame() {
    gameOver = true;
    setTimeout(() => {
        document.getElementById("result").style.display = "flex";
    }, 600);
}
</script>

</body>
</html>
